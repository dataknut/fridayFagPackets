---
title: "GDP & emissions - degrowthing or decoupling?"
author: "Ben Anderson & Tom Rushby"
date: "2022-10-06"
date-modified: "`r Sys.time()`"
format: 
  html:
    self-contained: true
    toc: true
    code-fold: true
editor: visual
---

```{r}
#| label: setup
#| echo: false
#| warning: false
library(data.table)
library(here)
library(ggplot2)
library(plotly)
library(skimr)
```

# Friday fagpackets

One of a [series](https://dataknut.github.io/fridayFagPackets/)...

# What's all this about de-growth?

\<sigh\>

# Data

Downloaded from the awesome [OurWorldInData](https://ourworldindata.org/grapher/co2-emissions-and-gdp?country=~GBR).

```{r}
#| label: loasdData

dt_abs <- data.table::fread(here::here("data", "co2-emissions-and-gdp.csv"))
dt_pc <- data.table::fread(here::here("data", "co2-emissions-and-gdp-per-capita.csv"))

```

Who do we care about?

```{r}
#| label: selectEntities
entities_of_interest <- c("United Kingdom", "United States", "New Zealand", "China")
```

# Absolute GDP & emissions

First we'll try production emissions.

```{r}
#| label: fig-SelectedProdPlot
#| fig-cap: GDP vs production emissions over time (selected entities).
#| warning: false

plotDT <- dt_abs[Entity %in% entities_of_interest]

ggplot2::ggplot(plotDT, aes(y = as.numeric(`GDP, PPP (constant 2017 international $)`)/1000000000, 
                            x = as.numeric(`Annual CO2 emissions`)/1000000,
                            colour = Entity,
                            alpha = Year)) +
  geom_point() +
  labs(x = "Annual CO2 emissions (production-based, gT)",
       y = "GDP $bn (constant 2017 $)")
```

Next we'll try consumption emissions.

Note that 2020 consumption-based emissions data is missing so you don't see the downtick

```{r}
#| label: fig-SelectedConsPlot
#| fig-cap: GDP vs consumotion emissions over time (selected entities).
#| warning: false
plotDT <- dt_abs[Entity %in% entities_of_interest]

ggplot2::ggplot(plotDT, aes(y = as.numeric(`GDP, PPP (constant 2017 international $)`)/1000000000, 
                            x = as.numeric(`Annual consumption-based CO2 emissions`)/1000000,
                            colour = Entity,
                            alpha = Year)) +
  geom_point() +
  labs(x = "Annual CO2 emissions (consumption-based, gT)",
       y = "GDP $bn (constant 2017 $)")
```

# Per capita GDP & emissions

Since we'll be dividing everything pairwise by the same denominator, nothing much should change... but the plots should be much clearer as we've removed the affect of population size

First we'll try production emissions.

```{r}
#| label: fig-SelectedProdPlotPcc
#| fig-cap: GDP vs production emissions over time (selected entities)
#| warning: false

plotDT <- dt_pc[Entity %in% entities_of_interest]

p <- ggplot2::ggplot(plotDT, aes(y = as.numeric(`GDP per capita, PPP (constant 2017 international $)`), 
                            x = as.numeric(`Annual CO2 emissions (per capita)`),
                            colour = Entity,
                            alpha = Year)) +
  geom_point() +
  theme(legend.position = "none") +
  labs(x = "Annual CO2 emissions per capita (production-based, T)",
       y = "GDP per capita (constant 2017 $)")

```

Let's repeat that for all countries. Hover over the dots to see which is which #YMMV

```{r}
#| label: fig-ProdPlotPcc
#| fig-cap: GDP vs production emissions over time (all entities)
#| warning: false

#plotDT <- dt_pc[Entity %in% entities_of_interest]
plotDT <- dt_pc # for fun

p <- ggplot2::ggplot(plotDT, aes(y = as.numeric(`GDP per capita, PPP (constant 2017 international $)`), 
                            x = as.numeric(`Annual CO2 emissions (per capita)`),
                            colour = Entity,
                            alpha = Year)) +
  geom_point() +
  theme(legend.position = "none") +
  labs(x = "Annual CO2 emissions per capita (production-based, T)",
       y = "GDP per capita (constant 2017 $)")

plotly::ggplotly(p)
```

Next we'll try consumption emissions.

Note that 2020 consumption-based emissions data is missing so you don't see the down-tick

```{r}
#| label: fig-SelectedConsPlotPcc
#| fig-cap: GDP vs consumption emissions over time (selected entities).
#| warning: false
plotDT <- dt_pc[Entity %in% entities_of_interest]

ggplot2::ggplot(plotDT, aes(y = as.numeric(`GDP per capita, PPP (constant 2017 international $)`), 
                            x = as.numeric(`Annual consumption-based CO2 emissions (per capita)`),
                            colour = Entity,
                            alpha = Year)) +
  geom_point() +
  labs(x = "Annual CO2 emissions per capita (consumption-based, T)",
       y = "GDP per capita (constant 2017 $)")
```

Let's repeat that for all countries. Hover over the dots to see which is which #YMMV

```{r}
#| label: fig-ConsPlotPcc
#| fig-cap: GDP vs consumption emissions over time (all entities)
#| warning: false

#plotDT <- dt_pc[Entity %in% entities_of_interest]
plotDT <- dt_pc # for fun

p <- ggplot2::ggplot(plotDT, aes(y = as.numeric(`GDP per capita, PPP (constant 2017 international $)`), 
                            x = as.numeric(`Annual consumption-based CO2 emissions (per capita)`),
                            colour = Entity,
                            alpha = Year)) +
  geom_point() +
  labs(x = "Annual CO2 emissions per capita (consumption-based, T)",
       y = "GDP per capita (constant 2017 $)")

plotly::ggplotly(p)
```

# Efficiency

How about looking at efficency gC02e per \$ GDP?

Following <https://timjackson.org.uk/earth-vs-growth/> ...

```{r}
#| label: selectProduction
dt_abs[, `Emissions intensity` := `Annual CO2 emissions`/`GDP, PPP (constant 2017 international $)`*1000*1000]

entities_of_interest <- c("United Kingdom", "United States", "World", "New Zealand", "China")
```

```{r}
#| label: selectAndPlotProduction
plotDT <- dt_abs[Entity %in% entities_of_interest]

ggplot2::ggplot(plotDT, aes(Year, `Emissions intensity`, colour = Entity)) +
  geom_line() +
  labs(y = "gC02 per $ GDP",
       colour = "Country",
       caption = "Data: https://ourworldindata.org")
```

For the UK, let's say c. 300g/\$ in 1995 reducing to 200g/\$ in 2010. So 15 years. To go from 200g/\$ to zero at the same rate would take approx. 30 years. So net-zero by 2050?

Regardless of whether that aligns with [science-based targets](https://sciencebasedtargets.org/how-it-works) (i.e. absolute zero by 2044) ... what happens if the economy grows ... by say 2-3% per year? ... would that force total emissions up (fixed intensity) or result in efficiency gains (lower intensity)?

```{r}
#| label: selectCons
dt_abs[, `Emissions intensity (consumption-based)` := `Annual consumption-based CO2 emissions`/`GDP, PPP (constant 2017 international $)`*1000*1000]
```

```{r}
#| label: selectAndPlotConsumption
plotDT <- dt_abs[Entity %in% entities_of_interest]

ggplot2::ggplot(plotDT, aes(Year, `Emissions intensity (consumption-based)`, colour = Entity)) +
  geom_line() +
  labs(y = "gC02 per $ GDP")
```

# Whom do we love?

[quarto](https://quarto.org/)

[data.table](https://www.rdocumentation.org/packages/data.table/versions/1.14.2)

[ggplot2](https://www.rdocumentation.org/packages/ggplot2/versions/3.3.6)

[here](https://www.rdocumentation.org/packages/here/versions/1.0.1)

[skimr](https://www.rdocumentation.org/packages/skimr/versions/2.1.4)

# Data descriptions

Check

Skim the absolute data:

```{r}
#| label: skimAbs
skimr::skim(dt_abs)
```

Skim the per capita data

```{r}
#| label: skimPC
skimr::skim(dt_pc)
```

```{r}
#| label: runToHere
# hidden chunk
```
